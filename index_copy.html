<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width">

	<title>Laern Python</title>

	<!-- Prism styles -->
	<link href="prism/prism.css" rel="stylesheet" />

	<!-- Styling  -->
	<link href="style.less" rel="stylesheet/less" type="text/css" />

	<!-- less.js (better version of CSS) -->
	<script src="less/dist/less.js" type="text/javascript">

	</script>

	<!-- CodeMirror (text editor) -->
	<script src="codemirror/lib/codemirror.js">

	</script>
	<link rel="stylesheet" href="codemirror/theme/dream.css">
	<link rel="stylesheet" href="codemirror/lib/codemirror.css">
	<script src="codemirror/mode/python/python.js">

	</script>
	<script src="codemirror/addon/display/autorefresh.js">

	</script>
</head>

<body>
	<!-- Title banner -->
	<div id="title">
		<h1>Learn <span>Python</span>
    </div>
    
    <div class="page" id="start">
        <h3>Welcome!</h3>

        <p>Ready to learn Python? Start here!</p>
        <a><!-- introduction link --></a>

        <p>Already know some things? Pick a specific tutorial here!</p>
        <ol>
            <!-- table of contents -->
        </ol>
    </div>

    <div class="page" id="code">
        <!-- <div id="editor-holder" class='editor'>
            <!-- 
                Editor will be added here by JS
            
        </div> -->

        <div id='console-holder' class='language-python'>
            <div style="height: 200px;">
                <textarea placeholder="Enter HTML Source Code" id="editing" spellcheck="false" oninput="update(this.value); sync_scroll(this);" onscroll="sync_scroll(this);" onkeydown="check_tab(this, event);"></textarea>
                <pre id="highlighting" aria-hidden="true">
                    <code class="language-html" id="highlighting-content">
                        &lt;span title=&quot;Start Typing&quot;&gt;Just start typing!&lt;/span&gt;
                    </code>
                </pre>
            </div>
        <script>
            function update(text) {
  let result_element = document.querySelector("#highlighting-content");
  // Handle final newlines (see article)
  if(text[text.length-1] == "\n") {
    text += " ";
  }
  // Update code
  result_element.innerHTML = text.replace(new RegExp("&", "g"), "&amp;").replace(new RegExp("<", "g"), "&lt;"); /* Global RegExp */
  // Syntax Highlight
  Prism.highlightElement(result_element);
}

function sync_scroll(element) {
  /* Scroll result to scroll coords of event - sync with textarea */
  let result_element = document.querySelector("#highlighting");
  // Get and set x and y
  result_element.scrollTop = element.scrollTop;
  result_element.scrollLeft = element.scrollLeft;
}

function check_tab(element, event) {
  let code = element.value;
  if(event.key == "Tab") {
    /* Tab key pressed */
    event.preventDefault(); // stop normal
    let before_tab = code.slice(0, element.selectionStart); // text before tab
    let after_tab = code.slice(element.selectionEnd, element.value.length); // text after tab
    let cursor_pos = element.selectionEnd + 1; // where cursor moves after tab - moving forward by 1 char to after tab
    element.value = before_tab + "\t" + after_tab; // add tab char
    // move cursor
    element.selectionStart = cursor_pos;
    element.selectionEnd = cursor_pos;
    update(element.value); // Update text to include indent
  }
}
        </script>
        </div>

        <!-- <div id="toolbar">
            <button id="run-code">Run code</button>
        </div>-->
        
    </div>

    <!-- Scripts -->
    <div>
        <!-- Skulpt.js (Python interpreter) -->
        <script src="skulpt/skulpt.min.js" type="text/javascript"></script>
        <script src="skulpt/skulpt-stdlib.js" type="text/javascript"></script>

        <!-- Prism.js (Syntax highlighting) -->
        <!-- <script src="prism/prism.js"></script> -->

        <!-- web scripts -->
        <script src="scripts/run.js"></script>
        <script src="scripts/editor.js"></script>
        <script src="scripts/script.js"></script>
        <script src='scripts/console.js'></script>
    </div>
</body>

</html>